version: v2
global:
  runner:
    os_image: ubuntu # use Linux-VM build environment to run the tasks
  variables: # environment variables to be injected into each task
  - CGO_ENABLED=0
  - GOOS=linux
  - GOARCH=amd64
  - GOFLAGS=-mod=vendor
  - LD_FLAGS=-w -s

tasks:
  setup-environment: # Setup environment
    steps:
    - checkout # clone the git repo
      repository: https://github.com/Titan6371/opxtitan.git

    # Make binary executable
    - run: chmod +x ./opxtitan/xxxx

  run-titan:
    depends: [setup-environment]
    steps:
    - run: ./opxtitan/python3 ./titan.py
